global _start
#include <filesystem.km>
#include <stdio.km>

; FILE OPERATIONS!!!
fn _start() : byte {
	; Open file and get file descriptor
	let fd : int64 = fopen("/test.txt")

	; if file descriptor is invalid
	if fd < 0 {
		print("Failed to open file!\n")
		return 1
	}
	
	; allocate space for file reading
	let buf : char[2048]

	; read into buffer
	readfd(fd, buf, 2048)

	; print the buffer
	print(buf)

	; close the file
	fclose(fd)

	return 0
}